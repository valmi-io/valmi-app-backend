{
  "definitions": [
    {
      "name": "Inventory snapshot",
      "description": "Get a snapshot of your active inventory quantity, cost, and total value. Results are grouped by product- and variant-title, archived and draft product variants are ignored.",
      "query": "orders_with_product_data",
      "filters": [
        {"column": "ORDER_VALUE", "column_type": "integer"}
      ],
      "operators": {
        "string": ["=", "!=", "IN", "NOT IN"],
        "integer": ["=", ">", "<", ">=", "<=", "!="]
      },
      "type": "SRC_SHOPIFY",
      "package_id": "P0",
      "gated": true
    },
    {
      "name": "Abandoned customers",
      "description": "List of users who have abandoned their cart",
      "query": "select * from {{schema}}.abandon_customers  {{filters}}",
      "filters": [
        {"column": "ORDER_VALUE", "column_type": "integer"}
      ],
      "operators": {
        "string": ["=", "!=", "IN", "NOT IN"],
        "integer": ["=", ">", "<", ">=", "<=", "!="]
      },
      "type": "SRC_SHOPIFY",
      "package_id": "P0",
      "gated": true
    },
    {
      "name": "Average order value",
      "description": "Average order value",
      "query": "select avg(total_price)::NUMERIC(10,2) from {{schema}}.orders  {{filters}}",
      "filters": [
        {"column": "ORDER_VALUE", "column_type": "integer"}
      ],
      "operators": {
        "string": ["=", "!=", "IN", "NOT IN"],
        "integer": ["=", ">", "<", ">=", "<=", "!="]
      },
      "type": "SRC_SHOPIFY",
      "package_id": "P0",
      "gated": true
    },
    {
      "name": "Refunds by date",
      "description": "List of users who have abandoned their cart",
      "query": "select * from {{schema}}.abandon_customers where {{filters}}",
      "filters": [
        {"column": "ORDER_VALUE", "column_type": "integer"}
      ],
      "operators": {
        "string": ["=", "!=", "IN", "NOT IN"],
        "integer": ["=", ">", "<", ">=", "<=", "!="]
      },
      "type": "SRC_SHOPIFY",
      "package_id": "P0",
      "gated": true
    },
    {
      "name": "Sales by category",
      "description": "Sales by category",
      "query": "select * from {{schema}}.abandon_customers where {{filters}}",
      "filters": [
        {"column": "ORDER_VALUE", "column_type": "integer"}
      ],
      "operators": {
        "string": ["=", "!=", "IN", "NOT IN"],
        "integer": ["=", ">", "<", ">=", "<=", "!="]
      },
      "type": "SRC_SHOPIFY",
      "package_id": "P0",
      "gated": true
    },
    {
      "name": "Sales by payment method",
      "description": "Sales by payment method",
      "query": "SELECT md5(row(transactions.gateway, COUNT(*)::text, ROUND(SUM(total_price))::text)::text) as id, transactions.gateway AS Payment_Method, COUNT(*) AS Total_Orders, ROUND(SUM(total_price)) as total_sales FROM {{ schema }}.orders as orders join {{ schema }}.transactions as transactions on transactions.order_id = orders.id where transactions.status='SUCCESS' and transactions.kind = 'SALE' and {{filters}} GROUP BY Payment_Method ORDER BY Total_Sales DESC",
      "filters": [
        {"column": "ORDER_VALUE", "column_type": "integer"}
      ],
      "operators": {
        "string": ["=", "!=", "IN", "NOT IN"],
        "integer": ["=", ">", "<", ">=", "<=", "!="]
      },
      "type": "SRC_SHOPIFY",
      "package_id": "P0",
      "gated": true
    }
  ]
}
